<div class="table-container">
  <div class="header-actions">
    <div class="search-bar">
      <input
        type="text"
        placeholder="Rechercher un don..."
        [(ngModel)]="searchTerm"
        (input)="applyFilters()"
      />
    </div>

    <div class="rightMenu">
      <select [(ngModel)]="filterStatut" (ngModelChange)="applyFilters()">
        <option value="Tous">Tous les statuts</option>
        <option value="EN_ATTENTE">En attente</option>
        <option value="PUBLIE">Publié</option>
        <option value="LIVRE">Livré</option>
        <option value="DECLINE">Decliné</option>
      </select>
      <button class="btn-filter">Filtrer</button>
      <button class="btn-primary" (click)="createDon()">+ Faire un Don</button>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Matériel</th>
        <th>Type</th>
        <th>Donateur</th>
        <th>Bénéficiaire</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let don of paginatedDons">
        <td class="tdTitre">{{ don.title }}</td>
        <td>{{ don.typeDon }}</td>
        <td>{{ don.donorId }}</td>
        <td>{{ don.donorName }}</td>
        <td>
          <span class="status" [ngClass]="don.isAvailable">
            @if(don.isAvailable == 'LIVRE'){
            <img src="edite/actif.svg" alt="" srcset="" />
            } @else if(don.isAvailable == 'DECLINE'){
            <img src="edite/rejete.svg" alt="" srcset="" />
            }
            {{ don.isAvailable }}
          </span>
        </td>
        <td>
          <button class="btn-details" (click)="detail(don)">
            <svg
              width="21"
              height="21"
              viewBox="0 0 21 21"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_498_910)">
                <path
                  d="M2.60897 10.7898C2.53952 10.6027 2.53952 10.3969 2.60897 10.2098C3.28539 8.56969 4.43357 7.16735 5.90795 6.18056C7.38233 5.19378 9.11651 4.66699 10.8906 4.66699C12.6648 4.66699 14.399 5.19378 15.8733 6.18056C17.3477 7.16735 18.4959 8.56969 19.1723 10.2098C19.2418 10.3969 19.2418 10.6027 19.1723 10.7898C18.4959 12.4299 17.3477 13.8323 15.8733 14.8191C14.399 15.8058 12.6648 16.3326 10.8906 16.3326C9.11651 16.3326 7.38233 15.8058 5.90795 14.8191C4.43357 13.8323 3.28539 12.4299 2.60897 10.7898Z"
                  stroke="#6B7280"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10.8906 13C12.2713 13 13.3906 11.8807 13.3906 10.5C13.3906 9.11929 12.2713 8 10.8906 8C9.50991 8 8.39062 9.11929 8.39062 10.5C8.39062 11.8807 9.50991 13 10.8906 13Z"
                  stroke="#6B7280"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_498_910">
                  <rect width="20" height="20" fill="white" transform="translate(0.890625 0.5)" />
                </clipPath>
              </defs>
            </svg>
            Détails
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <div class="left"></div>

    <div class="right">
      <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
        Précédent
      </button>
      <span>{{ currentPage }}</span>
      <button
        (click)="changePage(currentPage + 1)"
        [disabled]="currentPage >= filteredDons.length / itemsPerPage"
      >
        Suivant
      </button>
    </div>
  </div>
</div>
